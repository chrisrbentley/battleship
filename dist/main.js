(()=>{"use strict";const e=document.querySelector("main"),t=(e,t,a)=>{a.attackEnemy(t.gameboard,Number(e.dataset.row),Number(e.dataset.col),console.log(t.gameboard.board)),((e,t,a,r)=>{"miss"===e.gameboard.board[t][a].result?r.classList.add("miss"):r.classList.add("hit")})(t,Number(e.dataset.row),Number(e.dataset.col),e)},a=(a,r,o)=>{const l=document.createElement("div");l.className="board",e.appendChild(l);for(let e=0;e<r.length;e+=1)for(let i=0;i<r[e].length;i+=1){const r=document.createElement("div");r.dataset.row=e,r.dataset.col=i,r.className="cell",l.appendChild(r),!0===a.isAI&&r.addEventListener("click",(()=>{t(r,a,o)}),{once:!0})}},r=()=>{let e=!1;const t=function e(t){const a=new Array(t||0);let r=t;if(arguments.length>1){const o=Array.prototype.slice.call(arguments,1);for(;r--;)a[t-1-r]=e.apply(this,o)}return a}(10,10);for(let e=0;e<t.length;e+=1)for(let a=0;a<t[e].length;a+=1){const r={cellHit:!1,ship:void 0,result:void 0};t[e][a]=r}const a=()=>{let a=0;for(let r=0;r<t.length;r+=1)for(let o=0;o<t[r].length;o+=1)if("object"==typeof t[r][o].ship){if(!0!==t[r][o].ship.sunk)break;if(a+=1,17===a)return e=!0,e}return e};return{board:t,placeShip:(e,a,r,o)=>{const l=(e=>{let t=0,a=!1;return{get hits(){return t},get sunk(){return a},hit:()=>(t+=1,console.log("hit!!!"),t>=e&&(a=!0,console.log("sunk!!!")),{hits:t,sunk:a})}})(o);if(t[e][a].ship=l,o>1){let i,c=1;for("horizontal"===r?i=a:"vertical"===r&&(i=e);c<o;)"horizontal"===r?(i+=1,t[e][i].ship=l,c+=1):"vertical"===r&&(i+=1,t[i][a].ship=l,c+=1);c=1}return t[e][a]},receiveAttack:(e,r)=>{if(void 0===t[e][r].ship)t[e][r].cellHit=!0,t[e][r].result="miss";else if(void 0!==t[e][r].ship)return t[e][r].cellHit=!0,t[e][r].result="hit",t[e][r].ship.hit(),t[e][r];return a(),t[e][r]},allShipsSunk:a,get allSunk(){return e}}},o=(e,t)=>({name:e,gameboard:r(),attackEnemy:(e,a,r)=>{let o=a,l=r;if(console.log("attacking"),!0===t){if(o=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),!0===e.board[o][l].cellHit)for(;!0===e.board[o][l].cellHit;)o=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());e.receiveAttack(o,l)}else e.receiveAttack(o,l);return e.board[o][l]},isAI:t}),l=document.querySelector("#start"),i=document.querySelector("#name");l.addEventListener("click",(e=>{(e=>{const t=o(e,!1),r=o("Computer",!0);t.gameboard.placeShip(0,0,"horizontal",5),t.gameboard.placeShip(3,3,"horizontal",4),t.gameboard.placeShip(7,0,"vertical",3),t.gameboard.placeShip(5,8,"vertical",3),t.gameboard.placeShip(7,4,"vertical",2),r.gameboard.placeShip(0,0,"horizontal",5),r.gameboard.placeShip(3,3,"horizontal",4),r.gameboard.placeShip(7,0,"vertical",3),r.gameboard.placeShip(5,8,"vertical",3),r.gameboard.placeShip(7,4,"vertical",2),a(t,t.gameboard.board,r),a(r,r.gameboard.board,t),console.log(t,r)})(i.value),l.remove(),i.remove(),e.preventDefault()}))})();
//# sourceMappingURL=main.js.map