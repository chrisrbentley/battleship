(()=>{"use strict";const e=document.querySelector("main"),t=t=>{const a=document.createElement("div");a.className="board",e.appendChild(a);for(let e=0;e<t.length;e+=1)for(let r=0;r<t[e].length;r+=1){const t=document.createElement("div");t.dataset.row=e,t.dataset.col=r,t.className="cell",a.appendChild(t)}},a=()=>{let e=!1;const t=function e(t){const a=new Array(t||0);let r=t;if(arguments.length>1){const o=Array.prototype.slice.call(arguments,1);for(;r--;)a[t-1-r]=e.apply(this,o)}return a}(10,10);for(let e=0;e<t.length;e+=1)for(let a=0;a<t[e].length;a+=1){const r={cellHit:!1,ship:void 0};t[e][a]=r}const a=()=>{let a=0;for(let r=0;r<t.length;r+=1)for(let o=0;o<t[r].length;o+=1)if("object"==typeof t[r][o].ship){if(!0!==t[r][o].ship.sunk)break;if(a+=1,17===a)return e=!0,e}return e};return{board:t,placeShip:(e,a,r,o)=>{const l=(e=>{let t=0,a=!1;return{get hits(){return t},get sunk(){return a},hit:()=>(t+=1,console.log("hit!!!"),t>=e&&(a=!0),console.log("sunk!!!"),{hits:t,sunk:a})}})(o);if(t[e][a].ship=l,o>1){let i,n=1;for("horizontal"===r?i=a:"vertical"===r&&(i=e);n<o;)"horizontal"===r?(i+=1,t[e][i].ship=l,n+=1):"vertical"===r&&(i+=1,t[i][a].ship=l,n+=1);n=1}return t[e][a]},receiveAttack:(e,r)=>{if(void 0===t[e][r].ship)t[e][r].cellHit=!0;else if(void 0!==t[e][r].ship)return t[e][r].cellHit=!0,t[e][r].ship.hit(),t[e][r];return a(),t[e][r]},allShipsSunk:a,get allSunk(){return e}}},r=(e,t)=>({name:e,gameboard:a(),attackEnemy:(e,a,r)=>{let o=a,l=r;if(console.log("attacking"),!0===t){if(o=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),!0===e.board[o][l].cellHit)for(;!0===e.board[o][l].cellHit;)o=Math.floor(10*Math.random()),l=Math.floor(10*Math.random());e.receiveAttack(o,l)}else e.receiveAttack(o,l);return e.board[o][l]},isAI:t}),o=document.querySelector("#start"),l=document.querySelector("#name");o.addEventListener("click",(e=>{(e=>{const a=r(e,!1),o=r("Computer",!0);a.gameboard.placeShip(0,0,"horizontal",5),a.gameboard.placeShip(3,3,"horizontal",4),a.gameboard.placeShip(7,0,"vertical",3),a.gameboard.placeShip(5,8,"vertical",3),a.gameboard.placeShip(7,4,"vertical",2),o.gameboard.placeShip(0,0,"horizontal",5),o.gameboard.placeShip(3,3,"horizontal",4),o.gameboard.placeShip(7,0,"vertical",3),o.gameboard.placeShip(5,8,"vertical",3),o.gameboard.placeShip(7,4,"vertical",2),t(a.gameboard.board),t(o.gameboard.board),console.log(a,o)})(l.value),e.preventDefault()}))})();
//# sourceMappingURL=main.js.map